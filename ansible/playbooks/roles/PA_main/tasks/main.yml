- name: vars
  set_fact:
    create_vpn_user:  #bool
    disable_user:     #bool
    create_interface: #bool
    create_NAT:       #bool
    create_s2s_vpn:   #bool

    gather_users:     #bool
    gather_nat:       #bool
    gather_zones:     #bool

    commit_changes:   #bool

    palo_provider:
      ip_address: "{{ token_ip.stdout }}"
      api_key: "{{ token_key.stdout }}"

- name: Create VPN User
  include_role:
    name: PA_vpn_create_user
  when: create_vpn_user == true

- name: Disable VPN User
  include_role:
    name: PA_vpn_disable_user
  when: disable_user == true

- name: Create Interface
  include_role:
    name: PA_create_zones
  when: create_interface == true

- name: Create NAT
  include_role:
    name: PA_create_nat
  when: create_NAT == true

- name: Create IKE Gateway
  include_role:
    name: PA_s2s_vpn
  when: create_s2s_vpn == true

- name: Commit Changes
  include_role:
    name: PA_commit
  when: commit_changes == true

- name: List Users
  include_role:
    name: PA_gather_users
  when: gather_users == true

- name: List NATs
  include_role:
    name: PA_gather_nat
  when: gather_nat == true

- name: List Zones
  include_role:
    name: PA_gather_zones
  when: gather_zones == true