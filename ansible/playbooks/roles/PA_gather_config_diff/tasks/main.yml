- name: Get Config Diff 
  paloaltonetworks.panos.panos_op:
    provider: '{{ palo_provider }}'
    cmd_is_xml: true
    cmd: '<show><config><running/></config></show>'
  register: running

- name: Get Config Diff 
  paloaltonetworks.panos.panos_op:
    provider: '{{ palo_provider }}'
    cmd_is_xml: true
    cmd: '<show><config><candidate/></config></show>'
  register: candidate

- name: write running to file
  copy:
    content: '{{ running.stdout_xml }}'
    dest: '/runner/running.txt'

- name: write running to file
  copy:
    content: '{{ candidate.stdout_xml }}'
    dest: '/runner/candidate.txt'

- name: get diff
  shell: diff /runner/running.txt /runner/candidate.txt
  register: diff
  ignore_errors: true

- name: test diff
  debug:
    msg: '{{diff.stdout_lines}}'

# - name: temp cleanup
#   shell: rm -f '{{ item }}'
#   loop:
#     - '/runner/candidate.txt'
#     - '/runner/running.txt'
  
